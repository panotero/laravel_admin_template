function customConfirm(message) {
  return new Promise((resolve) => {
    const modal = document.getElementById("customConfirmModal");
    const messageEl = document.getElementById("customConfirmMessage");
    const okBtn = document.getElementById("customConfirmOk");
    const cancelBtn = document.getElementById("customConfirmCancel");

    if (!modal || !messageEl || !okBtn || !cancelBtn) return;

    // Set message
    messageEl.textContent = message;

    // Show modal and prevent background scroll
    modal.classList.remove("hidden");
    document.body.classList.add("overflow-hidden");

    // Clean up and resolve Promise
    const closeModal = (value) => {
      modal.classList.add("hidden");
      document.body.classList.remove("overflow-hidden");
      okBtn.removeEventListener("click", onOk);
      cancelBtn.removeEventListener("click", onCancel);
      resolve(value);
    };

    const onOk = () => closeModal(true);
    const onCancel = () => closeModal(false);

    okBtn.addEventListener("click", onOk);
    cancelBtn.addEventListener("click", onCancel);
  });
}

window.customConfirm = customConfirm;
